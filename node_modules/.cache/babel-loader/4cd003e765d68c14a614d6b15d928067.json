{"ast":null,"code":"import axios from \"axios\";\nimport _ from \"lodash\"; // import config from './config';\n\nconst instance = axios.create({\n  baseURL: process.env.REACT_APP_BACKEND_URL,\n  withCredentials: true\n});\n\nconst createError = (httpStatusCode, statusCode, errorMessage, problems, errorCode = \"\") => {\n  const error = new Error();\n  error.httpStatusCode = httpStatusCode;\n  error.statusCode = statusCode;\n  error.errorMessage = errorMessage;\n  error.problems = problems;\n  error.errorCode = errorCode + \"\";\n  return error;\n};\n\nexport const isSuccessStatusCode = s => {\n  // May be string or number\n  const statusType = typeof s;\n  return statusType === \"number\" && s === 0 || statusType === \"string\" && s.toUpperCase() === \"OK\";\n};\ninstance.interceptors.response.use(response => {\n  // Thrown error for request with OK status code\n  const {\n    data\n  } = response;\n\n  if (data.hasOwnProperty(\"s\") && !isSuccessStatusCode(data[\"s\"]) && data.hasOwnProperty(\"errmsg\")) {\n    return Promise.reject(createError(response.status, data[\"s\"], data[\"errmsg\"], null, data[\"errcode\"] ? data[\"errcode\"] : \"\"));\n  } // Return direct data to callnback\n\n\n  if (data.hasOwnProperty(\"s\") && data.hasOwnProperty(\"d\")) {\n    return data[\"d\"];\n  } // Handle special case\n\n\n  if (data.hasOwnProperty(\"s\") && _.keys(data).length === 1) {\n    return null;\n  }\n\n  return response.data;\n}, error => {\n  const {\n    response\n  } = error;\n\n  if (response == null) {\n    return Promise.reject(error);\n  }\n\n  const {\n    data\n  } = response;\n\n  if (data.hasOwnProperty(\"s\") && data.hasOwnProperty(\"errmsg\")) {\n    return Promise.reject(createError(response.status, data[\"s\"], data[\"errmsg\"]));\n  }\n\n  if (data.hasOwnProperty(\"code\") && data.hasOwnProperty(\"message\")) {\n    return Promise.reject(createError(response.status, data[\"code\"], data[\"message\"], data[\"problems\"]));\n  }\n\n  return Promise.reject(createError(response.status));\n});\nexport default instance;","map":{"version":3,"sources":["/home/dell/Documents/ReactJS/src/axios.js"],"names":["axios","_","instance","create","baseURL","process","env","REACT_APP_BACKEND_URL","withCredentials","createError","httpStatusCode","statusCode","errorMessage","problems","errorCode","error","Error","isSuccessStatusCode","s","statusType","toUpperCase","interceptors","response","use","data","hasOwnProperty","Promise","reject","status","keys","length"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport _ from \"lodash\";\n// import config from './config';\n\nconst instance = axios.create({\n  baseURL: process.env.REACT_APP_BACKEND_URL,\n  withCredentials: true,\n});\n\nconst createError = (\n  httpStatusCode,\n  statusCode,\n  errorMessage,\n  problems,\n  errorCode = \"\"\n) => {\n  const error = new Error();\n  error.httpStatusCode = httpStatusCode;\n  error.statusCode = statusCode;\n  error.errorMessage = errorMessage;\n  error.problems = problems;\n  error.errorCode = errorCode + \"\";\n  return error;\n};\n\nexport const isSuccessStatusCode = (s) => {\n  // May be string or number\n  const statusType = typeof s;\n  return (\n    (statusType === \"number\" && s === 0) ||\n    (statusType === \"string\" && s.toUpperCase() === \"OK\")\n  );\n};\n\ninstance.interceptors.response.use(\n  (response) => {\n    // Thrown error for request with OK status code\n    const { data } = response;\n    if (\n      data.hasOwnProperty(\"s\") &&\n      !isSuccessStatusCode(data[\"s\"]) &&\n      data.hasOwnProperty(\"errmsg\")\n    ) {\n      return Promise.reject(\n        createError(\n          response.status,\n          data[\"s\"],\n          data[\"errmsg\"],\n          null,\n          data[\"errcode\"] ? data[\"errcode\"] : \"\"\n        )\n      );\n    }\n\n    // Return direct data to callnback\n    if (data.hasOwnProperty(\"s\") && data.hasOwnProperty(\"d\")) {\n      return data[\"d\"];\n    }\n    // Handle special case\n    if (data.hasOwnProperty(\"s\") && _.keys(data).length === 1) {\n      return null;\n    }\n    return response.data;\n  },\n  (error) => {\n    const { response } = error;\n    if (response == null) {\n      return Promise.reject(error);\n    }\n\n    const { data } = response;\n\n    if (data.hasOwnProperty(\"s\") && data.hasOwnProperty(\"errmsg\")) {\n      return Promise.reject(\n        createError(response.status, data[\"s\"], data[\"errmsg\"])\n      );\n    }\n\n    if (data.hasOwnProperty(\"code\") && data.hasOwnProperty(\"message\")) {\n      return Promise.reject(\n        createError(\n          response.status,\n          data[\"code\"],\n          data[\"message\"],\n          data[\"problems\"]\n        )\n      );\n    }\n\n    return Promise.reject(createError(response.status));\n  }\n);\n\nexport default instance;\n"]},"metadata":{},"sourceType":"module"}